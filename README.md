# 실시간 주가 모니터 크롬 익스텐션 🚀

네이버 증권에서 실시간 주식 정보를 크롤링하여 브라우저 화면에 표시하는 고급 크롬 익스텐션입니다. 
카드 클릭으로 손쉬운 전환, 스마트한 자동 슬라이드, 완벽한 사용자 경험을 제공합니다.

## ✨ 주요 기능

### 📊 **실시간 주가 모니터링**
- 네이버 증권 DOM 크롤링을 통한 정확한 실시간 주가 정보 수집
- Python 로직 기반 정밀한 변동률 계산 (현재가 ± 전일가)
- 상승(🔴)/하락(🔵) 색상 구분으로 직관적 시각화

### 🎬 **스마트 슬라이드 시스템**
- **자동 슬라이드**: 2개 이상 종목 시 자동 카드 전환 (1-30초 설정 가능)
- **카드 클릭 전환**: 카드 어디든 클릭하여 즉시 다음 카드로 이동
- **수동 네비게이션**: 이전/다음 버튼으로 수동 조작
- **페이지 인디케이터**: 현재 위치 표시 (1/3, 2/3 등)
- **스마트 타이머**: 수동 전환 시 자동 슬라이드 타이머 재시작
- **실시간 간격 조정**: 설정 변경 시 즉시 반영

### ⚙️ **고급 설정 관리**
- **다중 종목 관리**: 무제한 종목 추가/삭제/활성화 토글
- **표시 위치 설정**: 4방향 위치 선택 + 드래그 앤 드롭
- **업데이트 주기**: 1-60분 사이 자유 설정
- **표시/숨김 토글**: 카드 표시 상태 제어 및 저장

### 🔧 **기술적 특장점**
- **Offscreen 크롤링**: 사용자에게 노출되지 않는 백그라운드 DOM 크롤링
- **Chrome Alarms**: 안정적인 주기적 데이터 업데이트
- **실시간 동기화**: popup 설정 변경 시 모든 탭에 즉시 반영
- **스마트 이벤트**: 중복 클릭 방지 및 이벤트 버블링 차단
- **타이밍 최적화**: 애니메이션과 타이머 동기화로 부드러운 전환
- **로딩 상태 표시**: Progress circle과 함께하는 부드러운 UX
- **에러 복구**: 타임아웃, 재시도 메커니즘으로 안정성 보장

## 설치 방법

1. 이 저장소를 클론하거나 다운로드합니다
2. Chrome 브라우저에서 `chrome://extensions/` 로 이동
3. 우상단의 "개발자 모드" 활성화
4. "압축해제된 확장 프로그램을 로드합니다" 클릭
5. 다운로드한 폴더를 선택

## 📖 사용 방법

### 🎯 **주식 종목 관리**
1. **종목 추가**
   - 익스텐션 아이콘 클릭 → 설정 창 열기
   - 주식 코드(6자리)와 종목명 입력 → "추가" 버튼
   - 인기 주식 빠른 추가 버튼 활용

2. **종목 관리**
   - **활성화/비활성화**: 토글 버튼으로 표시 여부 제어
   - **종목 삭제**: 🗑️ 버튼으로 완전 삭제
   - **즉시 반영**: 설정 변경 시 브라우저에 실시간 적용

### 🖱️ **카드 인터랙션**
1. **카드 클릭 전환** (2개 이상 종목 시)
   - 카드의 **어느 부분이든 클릭** → 즉시 다음 종목으로 전환
   - **네이버 로고 버튼 ![N]** → 해당 종목 네이버 페이지로 이동 (별도 기능)
   - **클릭 시 타이머 리셋** → 그 시점부터 다시 자동 슬라이드 시작

2. **스마트 클릭 보호**
   - **빠른 연속 클릭**: 중복 방지로 안정적 동작
   - **애니메이션 중**: 슬라이드 전환 중에는 클릭 무시
   - **1개 종목**: 클릭 기능 비활성화 (자동)

### 🎬 **슬라이드 기능**
1. **자동 슬라이드**
   - 2개 이상 종목 시 자동 활성화
   - 간격: 1-30초 사이 자유 설정 (기본: 5초)
   - 실시간 간격 변경 가능
   - 중복 실행 방지로 정확한 타이밍 보장

2. **수동 조작**
   - **카드 클릭**: 카드 어디든 클릭하여 바로 다음 카드로 이동
   - **이전/다음 버튼**: ‹ › 클릭으로 수동 전환  
   - **페이지 인디케이터**: ●○○ 현재 위치 표시 및 직접 이동
   - **스마트 타이머**: 수동 전환 시 자동 슬라이드 타이머 재시작

3. **네이버 통합**
   - **네이버 로고 버튼**: ![N] 네이버 증권 페이지로 바로 이동
   - **이벤트 분리**: 네이버 버튼과 카드 클릭 기능 독립적 동작

### ⚙️ **고급 설정**
1. **표시 설정**
   - **위치 선택**: 4방향 위치 + 드래그 앤 드롭 이동
   - **업데이트 주기**: 1-60분 (기본: 2분)
   - **자동 슬라이드**: 1-30초 (기본: 5초)

2. **표시 제어**
   - **표시/숨김**: + / − 버튼으로 토글
   - **상태 저장**: 새 브라우저 세션에서도 설정 유지
   - **드래그**: 카드를 원하는 위치로 자유 이동
   - **클릭 전환**: 2개 이상 종목 시 카드 클릭으로 즉시 다음 종목 이동

## 📁 파일 구조

```
├── manifest.json          # Chrome Extension 설정 (Manifest V3)
├── background.js          # Service Worker (데이터 관리, 알림 시스템)
├── content.js            # Content Script (UI 표시, 슬라이드 관리)
├── content.css           # UI 스타일시트 (애니메이션, 반응형)
├── popup.html            # 설정 팝업 UI
├── popup.js              # 설정 관리 로직
├── offscreen.html        # 오프스크린 DOM 크롤링용 HTML
├── offscreen.js          # 네이버 증권 크롤링 엔진
├── icons/                # 다양한 해상도 아이콘
│   ├── icon16.png        # 툴바 아이콘
│   ├── icon32.png        # 설정 페이지
│   ├── icon48.png        # 익스텐션 관리자
│   └── icon128.png       # Chrome 웹 스토어
└── README.md             # 프로젝트 문서
```

### 🔧 **아키텍처 설명**
- **manifest.json**: Manifest V3 기반 권한 및 설정
- **background.js**: Chrome Alarms 기반 안정적 주기 업데이트
- **offscreen.js**: 숨겨진 DOM에서 안전한 크롤링 수행
- **content.js**: 직접 DOM 조작으로 성능 최적화된 UI
- **popup.js**: 실시간 설정 동기화 및 localStorage 관리

## 🛠️ 기술 스택

### **Core Technologies**
- **ES2022+ JavaScript**: 최신 자바스크립트 문법 활용
- **Chrome Extension API (Manifest V3)**: 최신 확장 프로그램 표준
- **CSS3 + Animations**: GPU 가속 애니메이션 및 반응형 디자인
- **Chrome Storage API**: 영구 설정 저장소

### **Advanced Features**
- **Offscreen Documents**: 백그라운드 DOM 크롤링
- **Chrome Alarms**: 정확한 주기적 작업 스케줄링
- **Service Worker**: 백그라운드 데이터 관리
- **Real-time Messaging**: 다중 탭 간 실시간 동기화
- **Event Delegation**: 효율적인 카드 클릭 이벤트 관리
- **Debounce Control**: 중복 클릭 방지 시스템
- **Animation Sync**: 애니메이션과 타이머 완벽 동기화

## 🔧 주요 Chrome APIs

### **Background Service Worker**
```javascript
chrome.storage.local     // 설정 저장/로드
chrome.alarms           // 주기적 데이터 업데이트
chrome.tabs             // 탭 관리 및 메시지 전송
chrome.runtime          // 메시지 라우팅 시스템
chrome.offscreen        // 백그라운드 DOM 크롤링
```

### **Content Script**
```javascript
chrome.runtime.onMessage    // 실시간 설정 동기화
chrome.storage.local        // 사용자 설정 로드
fetch() + DOMParser         // 네이버 증권 크롤링
DOM Manipulation           // 성능 최적화된 UI 업데이트
Event Delegation           // 카드 클릭 이벤트 효율적 관리
Timer Management           // 자동 슬라이드 타이머 중복 방지
```

### **Offscreen Document**
```javascript
fetch()                    // CORS 우회 HTTP 요청
DOMParser                 // 안전한 HTML 파싱
AbortController          // 요청 타임아웃 관리
```

## 📊 지원하는 주식 정보

### **실시간 주가 데이터**
- **현재가**: 실시간 주식 가격 (원 단위)
- **등락액**: 전일 대비 변동 금액 (+100원/-200원)
- **등락률**: 정밀 계산된 변동 비율 (소수점 2자리)
- **전일가**: 이전 거래일 종가 정보
- **거래량**: 당일 거래 수량 정보

### **부가 정보**
- **업데이트 시간**: 마지막 데이터 갱신 시간
- **종목 코드**: 6자리 한국 주식 코드
- **종목명**: 정확한 회사/종목 이름
- **방향성**: 상승/하락/보합 추세 표시

### **시각적 표현**
- 🔴 **상승**: 빨간색 텍스트 + 플러스 기호
- 🔵 **하락**: 파란색 텍스트 + 마이너스 기호  
- ⚪ **보합**: 일반 텍스트 + 변동 없음

## 📈 버전 히스토리

### **v2.1.0** (2024-12-15) - ✨ **Enhanced UX Update**
- 🖱️ **원터치 카드 전환**: 카드 어디든 클릭하여 즉시 다음 종목으로 (2개 이상 시)
- 🎯 **스마트 타이머 재시작**: 수동 전환 후 그 시점부터 자동 슬라이드 재개
- ![N] **네이버 공식 브랜딩**: 🔗에서 네이버 로고 SVG로 브랜드 강화
- 🛡️ **완벽한 중복 방지**: Debounce + 이벤트 위임으로 빠른 클릭 보호
- ⚡ **애니메이션 동기화**: 슬라이드 전환과 타이머가 완벽하게 조화
- 🔧 **이벤트 버블링 차단**: 네이버 버튼과 카드 클릭 기능 완전 분리

### **v2.0.0** (2024-12-01) - 🚀 **Major Update**  
- 🎬 **자동 슬라이드 시스템**: 다중 종목 자동 전환 기능
- ⚙️ **슬라이드 간격 설정**: 1-30초 사용자 정의 간격
- 🔄 **실시간 설정 동기화**: popup 변경 시 즉시 브라우저 반영
- 📱 **오프스크린 크롤링**: 안전하고 빠른 백그라운드 데이터 수집
- 🎯 **Python 기반 계산**: 정밀한 변동률 계산 알고리즘

### **v1.5.0** (2024-11-01) - ✨ **Feature Update**
- 🎮 **수동 네비게이션**: 이전/다음 버튼 추가
- 📍 **페이지 인디케이터**: 현재 위치 시각적 표시
- 🔗 **네이버 링크**: 카드에서 바로 해당 종목 페이지 이동
- 🎨 **색상 시각화**: 상승/하락 색상 구분 시스템

### **v1.0.0** (2024-01-01) - 🎉 **Initial Release**
- 📊 기본 주가 모니터링 기능
- ⚙️ 설정 UI 구현  
- 🔄 실시간 업데이트 기능
- 💾 localStorage 설정 저장

## 🛡️ 개발자 정보

**고급 Chrome Extension 개발 프로젝트**
- Manifest V3 표준 준수 + 최신 Chrome APIs 활용
- 최신 웹 기술 스택 적용 (ES2022+, CSS3 Animations)
- 안정성과 성능 최적화 중심 (중복 방지, 타이밍 최적화)
- 사용자 경험 우선 설계 (직관적 인터랙션, 브랜드 정체성)

## 📄 라이선스

MIT License - 자유롭게 사용, 수정, 배포 가능

## 🔧 문제 해결

### **❌ 주가 정보가 표시되지 않는 경우**
1. **네트워크 연결**: 인터넷 연결 상태 확인
2. **주식 코드 확인**: 정확한 6자리 숫자 입력 (예: 005930)
3. **종목 활성화**: popup에서 해당 종목이 활성화되어 있는지 확인
4. **개발자 도구**: F12 → Console에서 에러 메시지 확인
5. **수동 새로고침**: 🔄 버튼으로 강제 데이터 새로고침

### **🎬 자동 슬라이드가 작동하지 않는 경우**
1. **종목 수 확인**: 2개 이상 활성화된 종목이 있는지 확인
2. **슬라이드 간격**: popup에서 슬라이드 간격이 적절히 설정되었는지 확인 (1-30초)
3. **표시 상태**: 카드가 표시 상태(−)인지 확인 (숨김 상태에서는 슬라이드 안됨)
4. **브라우저 포커스**: 다른 탭으로 이동했다가 돌아와서 재확인
5. **카드 클릭 후**: 수동 전환 후 자동 슬라이드가 재시작되는지 확인

### **🖱️ 카드 클릭이 작동하지 않는 경우**
1. **종목 수 확인**: 2개 이상 종목이 있어야 클릭 기능 활성화
2. **네이버 버튼 구분**: ![N] 네이버 버튼이 아닌 카드 영역을 클릭
3. **중복 클릭**: 빠른 연속 클릭 시 중복 방지로 일부 무시됨 (정상 동작)
4. **애니메이션 중**: 슬라이드 애니메이션 중에는 클릭 무시됨 (정상 동작)

### **⚙️ 익스텐션이 작동하지 않는 경우**
1. **Chrome 버전**: 최신 Chrome 브라우저 사용 확인
2. **개발자 모드**: `chrome://extensions/`에서 개발자 모드 활성화
3. **익스텐션 활성화**: 해당 익스텐션이 활성화되어 있는지 확인
4. **권한 허용**: 필요한 권한이 모두 허용되었는지 확인
5. **재설치**: 익스텐션 제거 후 다시 설치

### **🔄 설정이 저장되지 않는 경우**
1. **저장소 권한**: Chrome 저장소 권한 확인
2. **브라우저 용량**: 충분한 저장 공간 확인
3. **개인정보 모드**: 시크릿 모드가 아닌 일반 모드에서 사용
4. **수동 저장**: 💾 버튼으로 설정 수동 저장

## 🤝 기여하기

### **개발 참여**
1. **Repository Fork**: 이 저장소를 개인 계정으로 Fork
2. **Feature Branch**: 새 기능용 브랜치 생성
   ```bash
   git checkout -b feature/amazing-feature
   ```
3. **개발**: 코드 작성 및 테스트
4. **Commit**: 의미있는 커밋 메시지 작성
   ```bash
   git commit -m "Add: 자동 슬라이드 간격 설정 기능"
   ```
5. **Push & PR**: 브랜치 푸시 후 Pull Request 생성

### **버그 리포트 & 제안**
- **Issues**: GitHub Issues를 통한 버그 리포트
- **Feature Request**: 새로운 기능 제안
- **Documentation**: README 및 코멘트 개선

### **개발 가이드라인**
- **Manifest V3**: 최신 Chrome Extension 표준 준수
- **ES2022+**: 최신 JavaScript 문법 사용
- **Code Quality**: ESLint + Prettier 적용
- **Testing**: 주요 기능에 대한 테스트 코드 작성

---

## 🌟 특별히 감사한 기능들

- **🖱️ 직관적 카드 클릭**: 카드 어디든 클릭하면 바로 다음 종목으로 - 사용자 경험의 완벽한 예
- **🎯 스마트 타이머**: 수동 전환 시 자동 슬라이드가 그 시점부터 재시작되는 지능적 동작
- **🛡️ 완벽한 중복 방지**: 빠른 클릭, 애니메이션 중 클릭 모두 안전하게 처리
- **![N] 네이버 브랜딩**: 단순한 🔗에서 공식 네이버 로고로 - 브랜드 정체성 강화
- **🔄 실시간 동기화**: popup 변경이 즉시 모든 탭에 반영되는 마법같은 경험
- **📱 오프스크린 크롤링**: 사용자에게 보이지 않는 깔끔한 백그라운드 처리  
- **⚡ 타이밍 최적화**: 애니메이션과 타이머가 완벽하게 동기화된 부드러운 전환
- **🎯 정밀 계산**: Python 로직 기반의 정확한 주가 변동률 계산

**📞 문의사항이나 제안이 있으시면 언제든 GitHub Issues를 통해 연락주세요!**