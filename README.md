# 실시간 주가 모니터 크롬 익스텐션 🚀

네이버 증권에서 실시간 주식 정보를 크롤링하여 브라우저 화면에 표시하는 고급 크롬 익스텐션입니다. 
카드 클릭으로 손쉬운 전환, 스마트한 자동 슬라이드, 완벽한 사용자 경험을 제공합니다.

## ✨ 주요 기능

### 📊 **실시간 주가 모니터링**
- 네이버 증권 DOM 크롤링을 통한 정확한 실시간 주가 정보 수집
- Python 로직 기반 정밀한 변동률 계산 (현재가 ± 전일가)
- 상승(🔴)/하락(🔵) 색상 구분으로 직관적 시각화

### 🎬 **스마트 슬라이드 시스템**
- **자동 슬라이드**: 2개 이상 종목 시 자동 카드 전환 (1-30초 설정 가능)
- **카드 클릭 전환**: 카드 어디든 클릭하여 즉시 다음 카드로 이동
- **수동 네비게이션**: 이전/다음 버튼으로 수동 조작
- **페이지 인디케이터**: 현재 위치 표시 (1/3, 2/3 등)
- **스마트 타이머**: 수동 전환 시 자동 슬라이드 타이머 재시작
- **실시간 간격 조정**: 설정 변경 시 즉시 반영

### ⚙️ **고급 설정 관리**
- **다중 종목 관리**: 무제한 종목 추가/삭제/활성화 토글
- **표시 위치 설정**: 4방향 위치 선택 + 드래그 앤 드롭
- **업데이트 주기**: 1-60분 사이 자유 설정
- **표시/숨김 토글**: 카드 표시 상태 제어 및 저장

### 🔧 **기술적 특장점**
- **Offscreen 크롤링**: 사용자에게 노출되지 않는 백그라운드 DOM 크롤링
- **Chrome Alarms**: 안정적인 주기적 데이터 업데이트
- **실시간 동기화**: popup 설정 변경 시 모든 탭에 즉시 반영
- **스마트 이벤트**: 중복 클릭 방지 및 이벤트 버블링 차단
- **타이밍 최적화**: 애니메이션과 타이머 동기화로 부드러운 전환
- **로딩 상태 표시**: Progress circle과 함께하는 부드러운 UX
- **에러 복구**: 타임아웃, 재시도 메커니즘으로 안정성 보장

## 설치 방법

1. 이 저장소를 클론하거나 다운로드합니다
2. Chrome 브라우저에서 `chrome://extensions/` 로 이동
3. 우상단의 "개발자 모드" 활성화
4. "압축해제된 확장 프로그램을 로드합니다" 클릭
5. 다운로드한 폴더를 선택

## 📖 사용 방법

### 🎯 **주식 종목 관리**
1. **종목 추가**
   - 익스텐션 아이콘 클릭 → 설정 창 열기
   - 주식 코드(6자리)와 종목명 입력 → "추가" 버튼
   - 인기 주식 빠른 추가 버튼 활용

2. **종목 관리**
   - **활성화/비활성화**: 토글 버튼으로 표시 여부 제어
   - **종목 삭제**: 🗑️ 버튼으로 완전 삭제
   - **즉시 반영**: 설정 변경 시 브라우저에 실시간 적용

### 🖱️ **카드 인터랙션**
1. **카드 클릭 전환** (2개 이상 종목 시)
   - 카드의 **어느 부분이든 클릭** → 즉시 다음 종목으로 전환
   - **네이버 로고 버튼 ![N]** → 해당 종목 네이버 페이지로 이동 (별도 기능)
   - **클릭 시 타이머 리셋** → 그 시점부터 다시 자동 슬라이드 시작

2. **스마트 클릭 보호**
   - **빠른 연속 클릭**: 중복 방지로 안정적 동작
   - **애니메이션 중**: 슬라이드 전환 중에는 클릭 무시
   - **1개 종목**: 클릭 기능 비활성화 (자동)

### 🎬 **슬라이드 기능**
1. **자동 슬라이드**
   - 2개 이상 종목 시 자동 활성화
   - 간격: 1-30초 사이 자유 설정 (기본: 5초)
   - 실시간 간격 변경 가능
   - 중복 실행 방지로 정확한 타이밍 보장

2. **수동 조작**
   - **카드 클릭**: 카드 어디든 클릭하여 바로 다음 카드로 이동
   - **이전/다음 버튼**: ‹ › 클릭으로 수동 전환  
   - **페이지 인디케이터**: ●○○ 현재 위치 표시 및 직접 이동
   - **스마트 타이머**: 수동 전환 시 자동 슬라이드 타이머 재시작

3. **네이버 통합**
   - **네이버 로고 버튼**: ![N] 네이버 증권 페이지로 바로 이동
   - **이벤트 분리**: 네이버 버튼과 카드 클릭 기능 독립적 동작

### ⚙️ **고급 설정**
1. **표시 설정**
   - **위치 선택**: 4방향 위치 + 드래그 앤 드롭 이동
   - **업데이트 주기**: 1-60분 (기본: 2분)
   - **자동 슬라이드**: 1-30초 (기본: 5초)

2. **표시 제어**
   - **표시/숨김**: + / − 버튼으로 토글
   - **상태 저장**: 새 브라우저 세션에서도 설정 유지
   - **드래그**: 카드를 원하는 위치로 자유 이동
   - **클릭 전환**: 2개 이상 종목 시 카드 클릭으로 즉시 다음 종목 이동

## 📁 파일 구조

```
├── manifest.json          # Chrome Extension 설정 (Manifest V3)
├── background.js          # Service Worker (데이터 관리, 알림 시스템)
├── content.js            # Content Script (UI 표시, 슬라이드 관리)
├── content.css           # UI 스타일시트 (애니메이션, 반응형)
├── popup.html            # 설정 팝업 UI
├── popup.js              # 설정 관리 로직
├── offscreen.html        # 오프스크린 DOM 크롤링용 HTML
├── offscreen.js          # 네이버 증권 크롤링 엔진
├── icons/                # 다양한 해상도 아이콘
│   ├── icon16.png        # 툴바 아이콘
│   ├── icon32.png        # 설정 페이지
│   ├── icon48.png        # 익스텐션 관리자
│   └── icon128.png       # Chrome 웹 스토어
└── README.md             # 프로젝트 문서
```

### 🔧 **아키텍처 설명**
- **manifest.json**: Manifest V3 기반 권한 및 설정
- **background.js**: Chrome Alarms 기반 안정적 주기 업데이트
- **offscreen.js**: 숨겨진 DOM에서 안전한 크롤링 수행
- **content.js**: 직접 DOM 조작으로 성능 최적화된 UI
- **popup.js**: 실시간 설정 동기화 및 localStorage 관리

## 🛠️ 기술 스택

### **Core Technologies**
- **ES2022+ JavaScript**: 최신 자바스크립트 문법 활용
- **Chrome Extension API (Manifest V3)**: 최신 확장 프로그램 표준
- **CSS3 + Animations**: GPU 가속 애니메이션 및 반응형 디자인
- **Chrome Storage API**: 영구 설정 저장소

### **Advanced Features**
- **Offscreen Documents**: 백그라운드 DOM 크롤링
- **Chrome Alarms**: 정확한 주기적 작업 스케줄링
- **Service Worker**: 백그라운드 데이터 관리
- **Real-time Messaging**: 다중 탭 간 실시간 동기화
- **Event Delegation**: 효율적인 카드 클릭 이벤트 관리
- **Debounce Control**: 중복 클릭 방지 시스템
- **Animation Sync**: 애니메이션과 타이머 완벽 동기화

## 🔧 주요 Chrome APIs

### **Background Service Worker**
```javascript
chrome.storage.local     // 설정 저장/로드
chrome.alarms           // 주기적 데이터 업데이트
chrome.tabs             // 탭 관리 및 메시지 전송
chrome.runtime          // 메시지 라우팅 시스템
chrome.offscreen        // 백그라운드 DOM 크롤링
```

### **Content Script**
```javascript
chrome.runtime.onMessage    // 실시간 설정 동기화
chrome.storage.local        // 사용자 설정 로드
fetch() + DOMParser         // 네이버 증권 크롤링
DOM Manipulation           // 성능 최적화된 UI 업데이트
Event Delegation           // 카드 클릭 이벤트 효율적 관리
Timer Management           // 자동 슬라이드 타이머 중복 방지
```

### **Offscreen Document**
```javascript
fetch()                    // CORS 우회 HTTP 요청
DOMParser                 // 안전한 HTML 파싱
AbortController          // 요청 타임아웃 관리
```

## 🔧 문제 해결

### **❌ 주가 정보가 표시되지 않는 경우**
1. **네트워크 연결**: 인터넷 연결 상태 확인
2. **주식 코드 확인**: 정확한 6자리 숫자 입력 (예: 005930)
3. **종목 활성화**: popup에서 해당 종목이 활성화되어 있는지 확인
4. **개발자 도구**: F12 → Console에서 에러 메시지 확인
5. **수동 새로고침**: 🔄 버튼으로 강제 데이터 새로고침

### **🎬 자동 슬라이드가 작동하지 않는 경우**
1. **종목 수 확인**: 2개 이상 활성화된 종목이 있는지 확인
2. **슬라이드 간격**: popup에서 슬라이드 간격이 적절히 설정되었는지 확인 (1-30초)
3. **표시 상태**: 카드가 표시 상태(−)인지 확인 (숨김 상태에서는 슬라이드 안됨)
4. **브라우저 포커스**: 다른 탭으로 이동했다가 돌아와서 재확인
5. **카드 클릭 후**: 수동 전환 후 자동 슬라이드가 재시작되는지 확인

### **🖱️ 카드 클릭이 작동하지 않는 경우**
1. **종목 수 확인**: 2개 이상 종목이 있어야 클릭 기능 활성화
2. **네이버 버튼 구분**: ![N] 네이버 버튼이 아닌 카드 영역을 클릭
3. **중복 클릭**: 빠른 연속 클릭 시 중복 방지로 일부 무시됨 (정상 동작)
4. **애니메이션 중**: 슬라이드 애니메이션 중에는 클릭 무시됨 (정상 동작)

### **⚙️ 익스텐션이 작동하지 않는 경우**
1. **Chrome 버전**: 최신 Chrome 브라우저 사용 확인
2. **개발자 모드**: `chrome://extensions/`에서 개발자 모드 활성화
3. **익스텐션 활성화**: 해당 익스텐션이 활성화되어 있는지 확인
4. **권한 허용**: 필요한 권한이 모두 허용되었는지 확인
5. **재설치**: 익스텐션 제거 후 다시 설치

### **🔄 설정이 저장되지 않는 경우**
1. **저장소 권한**: Chrome 저장소 권한 확인
2. **브라우저 용량**: 충분한 저장 공간 확인
3. **개인정보 모드**: 시크릿 모드가 아닌 일반 모드에서 사용
4. **수동 저장**: 💾 버튼으로 설정 수동 저장

## 📄 라이선스

MIT License - 자유롭게 사용, 수정, 배포 가능